# ğŸ¤– Deca

> æœ¬åœ°ä¼˜å…ˆçš„ macOS AI Agent æ§åˆ¶ç½‘å…³

Deca æ˜¯ä¸€ä¸ªæœ¬åœ°è¿è¡Œçš„ AI Agent ç³»ç»Ÿï¼Œå…è®¸ AI é€šè¿‡å¤šç§é€šé“ï¼ˆDiscordã€Terminalã€HTTPï¼‰ä¸ç”¨æˆ·äº¤äº’ï¼Œå¹¶é€šè¿‡å·¥å…·å±‚æ§åˆ¶æœ¬åœ° macOS æœºå™¨ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

- **ğŸ§  AI Agent æ ¸å¿ƒ** - åŸºäº Claude API çš„å¯¹è¯ç®¡ç†å’Œå·¥å…·è°ƒç”¨
- **ğŸ’¬ å¤šé€šé“æ”¯æŒ** - Discord æœºå™¨äººã€ç»ˆç«¯ REPLã€HTTP API
- **ğŸ”§ å·¥å…·ç³»ç»Ÿ** - AppleScriptã€Shell å‘½ä»¤ã€æ–‡ä»¶æ“ä½œç­‰
- **ğŸ’¾ æŒä¹…åŒ–å­˜å‚¨** - SQLite ä¼šè¯å­˜å‚¨å’Œå‡­è¯ç®¡ç†
- **â° å¿ƒè·³æœºåˆ¶** - å®šæ—¶ä»»åŠ¡å’Œä¸»åŠ¨å”¤é†’

## ğŸ“ ç›®å½•ç»“æ„

```
packages/
â”œâ”€â”€ agent/      # AI Agent æ ¸å¿ƒï¼ˆå¯¹è¯ç®¡ç†ã€å·¥å…·æ‰§è¡Œï¼‰
â”œâ”€â”€ storage/    # æŒä¹…åŒ–å±‚ï¼ˆSQLiteï¼‰
â”œâ”€â”€ discord/    # Discord æœºå™¨äººé€šé“
â”œâ”€â”€ terminal/   # ç»ˆç«¯ REPL é€šé“
â”œâ”€â”€ http/       # HTTP API é€šé“ï¼ˆHonoï¼‰
â””â”€â”€ gateway/    # ç»„è£…å±‚ï¼ˆç»„åˆ agent + channelsï¼‰

docs/           # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# å®‰è£…ä¾èµ–
bun install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆEcho æ¨¡å¼ï¼Œæ— éœ€ API Keyï¼‰
bun run dev

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆAgent æ¨¡å¼ï¼Œéœ€è¦ API Keyï¼‰
ANTHROPIC_API_KEY=xxx bun run dev
```

## ğŸ§ª æµ‹è¯•

Deca é‡‡ç”¨å››å±‚æµ‹è¯•æ¶æ„ï¼š

| å±‚çº§ | ç±»å‹ | å‘½ä»¤ | ç‰¹ç‚¹ |
|------|------|------|------|
| 1 | Unit | `bun run test:unit` | Mock ä¾èµ–ï¼Œå¿«é€Ÿ |
| 2 | Lint | `bun run lint` | é™æ€æ£€æŸ¥ |
| 3 | E2E | `bun --filter @deca/discord test:e2e` | Echo æ¨¡å¼ |
| 4 | Behavioral | `bun --filter @deca/gateway test:behavioral` | çœŸå® LLM |

```bash
# å•å…ƒæµ‹è¯•
bun run test:unit

# ä»£ç æ£€æŸ¥
bun run lint

# è¡Œä¸ºæµ‹è¯•ï¼ˆéœ€è¦ LLM API + Discordï¼‰
bun --filter @deca/gateway test:behavioral
```

è¯¦è§ [docs/04-testing.md](docs/04-testing.md)

## ğŸ“Š æµ‹è¯•è¦†ç›–ç‡

| æ¨¡å— | æµ‹è¯•æ•° | è¦†ç›–ç‡ç›®æ ‡ |
|------|--------|-----------|
| @deca/agent | 319 | 90%+ |
| @deca/discord | 254 | 90%+ |
| @deca/terminal | 47 | 90%+ |
| @deca/http | 35 | 90%+ |
| @deca/storage | 47 | 90%+ |
| @deca/gateway | 37 | 90%+ |
| **æ€»è®¡** | **739** | **90%+** |

## ğŸ“š æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [ç³»ç»Ÿæ¶æ„](docs/01-architecture.md) | æ•´ä½“æ¶æ„è®¾è®¡å’Œæ¨¡å—ä¾èµ–å…³ç³» |
| [æ¨¡å—è¯¦è§£](docs/02-modules.md) | å„æ¨¡å—åŠŸèƒ½å’Œæ¥å£è¯´æ˜ |
| [å¼€å‘æŒ‡å—](docs/03-development.md) | æœ¬åœ°å¼€å‘ç¯å¢ƒé…ç½®å’Œå¸¸ç”¨å‘½ä»¤ |
| [æµ‹è¯•è§„èŒƒ](docs/04-testing.md) | **å››å±‚æµ‹è¯•æ¶æ„**ã€è¦†ç›–ç‡è¦æ±‚ |
| [è´¡çŒ®æŒ‡å—](docs/05-contributing.md) | Git è§„èŒƒã€ä»£ç é£æ ¼å’Œæäº¤è¦æ±‚ |
| [E2E è°ƒè¯•](docs/06-e2e-discord-debugging.md) | Discord E2E è°ƒè¯•é—­ç¯ |
| [Agent å·¥å…·](docs/07-agent-tools.md) | Agent å·¥å…·ç³»ç»Ÿè¯¦è§£ |

---

## ğŸ¤– AI Agent é¡»çŸ¥

> ä»¥ä¸‹å†…å®¹ä¾› AI ç¼–ç¨‹åŠ©æ‰‹é˜…è¯»

### æ ¸å¿ƒåŸåˆ™

1. **TDD ä¼˜å…ˆ** - å…ˆå†™æµ‹è¯•ï¼Œåå†™å®ç°
2. **90% è¦†ç›–ç‡** - æ‰€æœ‰æ¨¡å—å¿…é¡»è¾¾åˆ° 90%+ æµ‹è¯•è¦†ç›–ç‡
3. **åŸå­åŒ–æäº¤** - æ¯ä¸ª commit ä»£è¡¨ä¸€ä¸ªå•ä¸€ä¸”é€»è¾‘å®Œæ•´çš„å˜æ›´
4. **æ–‡æ¡£åŒæ­¥** - ä¿®æ”¹ä»£ç å¿…é¡»åŒæ­¥æ›´æ–°ç›¸å…³æ–‡æ¡£

### æ¨¡å—è¾¹ç•Œè§„åˆ™

```
gateway â†’ discord, terminal, http, agent, storage  (å”¯ä¸€ç»„è£…ç‚¹)
discord, terminal, http â†’ (æ— ä¾èµ–ï¼Œå„è‡ªç‹¬ç«‹)
agent â†’ storage
```

**ä¸¥æ ¼è§„åˆ™ï¼š**
- Gateway æ˜¯å”¯ä¸€å¯ä»¥ç»„è£… agent + channels çš„åœ°æ–¹
- Channels ä¸èƒ½ä¾èµ– @deca/agent
- Channels ä¸èƒ½ç›¸äº’ä¾èµ–
- æ¯ä¸ª channel å®šä¹‰è‡ªå·±çš„ MessageHandler æ¥å£

### å¼€å‘æµç¨‹

1. ç†è§£éœ€æ±‚ï¼Œè§„åˆ’ä»»åŠ¡
2. ç¼–å†™æµ‹è¯•ç”¨ä¾‹
3. å®ç°åŠŸèƒ½ä»£ç 
4. ç¡®ä¿æµ‹è¯•é€šè¿‡å’Œ lint é€šè¿‡
5. æ›´æ–°ç›¸å…³æ–‡æ¡£
6. åŸå­åŒ–æäº¤

### å¸¸ç”¨å‘½ä»¤

```bash
bun install              # å®‰è£…ä¾èµ–
bun run dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
bun run test:unit        # è¿è¡Œå•å…ƒæµ‹è¯•
bun run lint             # è¿è¡Œä»£ç æ£€æŸ¥
```

### Git è§„èŒƒ

éµå¾ª Conventional Commitsï¼š
- `fix:` - Bug ä¿®å¤
- `feat:` - æ–°åŠŸèƒ½
- `refactor:` - ä»£ç é‡æ„
- `docs:` - æ–‡æ¡£æ›´æ–°
- `test:` - æµ‹è¯•ç›¸å…³
- `chore:` - ç»´æŠ¤ä»»åŠ¡

## ğŸ“„ è®¸å¯è¯

MIT
